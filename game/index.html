<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=>, initial-scale=1.0">
    <title>typing game</title>
</head>
<h1>Typing Game</h1>
<p>Let's start touch typing!</p>

<body onload="gameSet()">
    <div id="waku"></div>

    <header>
<script>
document.onkeydown = typeGame;
    var moji = new Array("Ａ","Ｂ","Ｃ","Ｄ","Ｅ","Ｆ","Ｇ","Ｈ","Ｉ",
                         "Ｊ","Ｋ","Ｌ","Ｍ","Ｎ","Ｏ","Ｐ","Ｑ","Ｒ",
                         "Ｓ","Ｔ","Ｕ","Ｖ","Ｗ","Ｘ","Ｙ","Ｚ");
    var kcode = new Array(65,66,67,68,69,70,71,72,73,
                          74,75,76,77,78,79,80,81,82,
                          83,84,85,86,87,88,89,90);
    var rnd = new Array();
    var mondai = "";
    var cnt=0;
    var typStart,typEnd;
    function ransu()
    {
      for ( var i = 0 ; i < 200 ; i++ )
      {
        rnd[i] = Math.floor( Math.random() * 26 );
      }
    }
    function gameSet()
    {
      mondai="";
      cnt=0;
      ransu();
      for ( var i = 0 ; i < 200 ; i++)
      {
        mondai =  mondai + moji[ rnd[i] ];
      }
      document.getElementById("waku").innerHTML = mondai;
    }
    function typeGame(evt)
    {
      var kc; 
      if (document.all)
      {
        kc = event.keyCode;
      }
      else
      {
        kc = evt.which;
      }
      if (kc == kcode[ rnd[cnt] ])
      {
        if (cnt==0)
        {
          typStart = new Date();
        }
        cnt++;
        if ( cnt < 200)
        {
          mondai = mondai.substring(1,mondai.Length);
          document.getElementById("waku").innerHTML = mondai;
        }
        else
        {
          typEnd = new Date();
          var keika = typEnd - typStart;
          var sec = Math.floor( keika/1000 );
          var msec = keika % 1000;
          var fin="GAME終了　時間："+sec+"秒"+msec;
          document.getElementById("waku").innerHTML = fin;
        }
      }
    }
</script>
</header>
</body>
<footer>
       <p><small>&copy;fuwa2020</small></p>
</footer>
</html>